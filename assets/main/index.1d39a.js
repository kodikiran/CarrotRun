window.__require=function t(e,i,n){function o(s,c){if(!i[s]){if(!e[s]){var r=s.split("/");if(r=r[r.length-1],!e[r]){var l="function"==typeof __require&&__require;if(!c&&l)return l(r,!0);if(a)return a(r,!0);throw new Error("Cannot find module '"+s+"'")}s=r}var h=i[s]={exports:{}};e[s][0].call(h.exports,function(t){return o(e[s][1][t]||t)},h,h.exports,t,e,i,n)}return i[s].exports}for(var a="function"==typeof __require&&__require,s=0;s<n.length;s++)o(n[s]);return o}({AnimationController:[function(t,e){"use strict";cc._RF.push(e,"b9742/BacNE/78yIS0cLLZI","AnimationController"),cc.Class({extends:cc.Component,properties:{timeElapsed:0,anim:null,animationNames:{default:[],type:[cc.String]},currentAnimationIndex:0},start:function(){this.anim=this.getComponent(cc.Animation),this.anim.on("finished",this.onAnimationFinished,this)},update:function(t){this.timeElapsed+=t},onAnimationFinished:function(){1==this.currentAnimationIndex?this.ChangeAnimation(2):3==this.currentAnimationIndex&&this.ChangeAnimation(0)},ChangeAnimation:function(t){if(0==t?(this.anim.play(this.animationNames[t]),this.currentAnimationIndex=t):2==t&&(this.anim.play(this.animationNames[t]),this.currentAnimationIndex=t),1==t){var e=0;3==this.currentAnimationIndex&&(e=.25-this.timeElapsed,console.log("playtime "+e)),e<0&&(e=0),this.anim.play(this.animationNames[t],e),this.currentAnimationIndex=t}else 3==t?(e=0,1==this.currentAnimationIndex&&(e=.25-this.timeElapsed,console.log("playtime "+e)),e<0&&(e=0),this.anim.play(this.animationNames[t],e),this.currentAnimationIndex=t):4==t?(this.currentAnimationIndex=t,this.anim.play(this.animationNames[t])):5==t&&(this.currentAnimationIndex=t,this.anim.play(this.animationNames[t]));this.timeElapsed=0},onDisable:function(){this.anim.off("finished",this.onAnimationFinished,this)}}),cc._RF.pop()},{}],CameraController:[function(t,e){"use strict";cc._RF.push(e,"342d88tpc1Pr7AmZB7ZCRFF","CameraController"),cc.Class({extends:cc.Component,properties:{player:{default:null,type:cc.Node},xoffset:0},start:function(){this.xoffset=this.node.x-this.player.x,this.CocosPreInitialization()},update:function(){this.FollowPlayer()},FollowPlayer:function(){this.node.x=cc.misc.lerp(this.node.x,this.player.x+this.xoffset,.75)},CocosPreInitialization:function(){cc.view.enableAutoFullScreen(!1);var t=cc.director.getPhysicsManager();t.enabled=!0,t.gravity=cc.v2(0,-1960),cc.director.getCollisionManager().enabled=!0}}),cc._RF.pop()},{}],FireObstacle:[function(t,e){"use strict";cc._RF.push(e,"0ee3czBqhxByZ5tARckC644","FireObstacle"),cc.Class({extends:cc.Component,properties:{delay:.5,isFireActive:!1,boxCollider:{default:null,type:cc.BoxCollider},fireAnimationController:{default:null,type:cc.Animation},canPlayAudio:!1,audioSource:{type:cc.AudioSource,default:null}},start:function(){this.FireAnimation()},FireAnimation:function(){var t=this,e=cc.tween().delay(this.delay).call(function(){t.ToggleFire()}).delay(.5).call(function(){t.ToggleFire()});cc.tween(this.node).repeatForever(e).start()},ToggleFire:function(){this.isFireActive?(this.boxCollider.enabled=!1,this.isFireActive=!1,this.audioSource.stop()):this.isFireActive||(this.boxCollider.enabled=!0,this.isFireActive=!0,this.fireAnimationController.play("fireAnimation"),this.canPlayAudio&&this.audioSource.play())}}),cc._RF.pop()},{}],FireSound:[function(t,e){"use strict";cc._RF.push(e,"45be8F+R5lDyZjg26eKM/7F","FireSound"),cc.Class({extends:cc.Component,properties:{fireObstacle:{default:null,type:cc.Node},fireObstacleScript:null},start:function(){this.fireObstacleScript=this.fireObstacle.getComponent("FireObstacle")},onCollisionEnter:function(t){10==t.tag?(console.log("play audio"),this.fireObstacleScript.canPlayAudio=!0):9==t.tag&&(console.log("stop the audio"),this.fireObstacleScript.canPlayAudio=!1)}}),cc._RF.pop()},{}],Global:[function(t,e){"use strict";cc._RF.push(e,"f5b35fHp3BAJYqYmU3We6T4","Global"),window.Global={isGamePlaying:!1,isGamePaused:!1,isGameOver:!1},cc._RF.pop()},{}],InputHandler:[function(t,e){"use strict";cc._RF.push(e,"faa90Dfs55Kdb1Jx0WjIMEa","InputHandler"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){cc.macro.ENABLE_MULTI_TOUCH=!1,this.node.on(cc.Node.EventType.TOUCH_START,this.TouchBegan,this),this.node.on(cc.Node.EventType.TOUCH_END,this.TouchEnded,this)},start:function(){},TouchBegan:function(t){t.getTouches()[0].getLocation(),cc.game.emit("touchBegan",{})},TouchEnded:function(t){t.getTouches()[0].getLocation(),cc.game.emit("touchEnded",{})}}),cc._RF.pop()},{}],ObjectDestroyer:[function(t,e){"use strict";cc._RF.push(e,"4debe7woIxGEb3q7yAQm8IM","ObjectDestroyer"),cc.Class({extends:cc.Component,properties:{},start:function(){},onCollisionEnter:function(t){1==t.tag?t.node.parent.destroy():2==t.tag&&t.node.destroy()}}),cc._RF.pop()},{}],ObstacleMovement:[function(t,e){"use strict";cc._RF.push(e,"af9ebVVJBNGEYVfOa+PscM3","ObstacleMovement"),cc.Class({extends:cc.Component,properties:{duration:2,MovableObject:{default:null,type:cc.Node},objectType:1,animation:null,audioSource:{type:cc.AudioSource,default:null},canPlayAudio:!1},start:function(){switch(this.objectType){case 1:this.DualBlade();break;case 2:this.SideKnife();break;case 3:this.VerticalKnife();break;case 4:this.Hammer();break;case 5:this.VerticalPlate();break;case 6:this.SawBlade()}},DualBlade:function(){var t=cc.tween().by(this.duration,{angle:360});cc.tween(this.MovableObject).repeatForever(t).start()},SideKnife:function(){var t=cc.tween().by(this.duration,{x:600}).by(this.duration,{x:-600});this.animation=cc.tween(this.MovableObject).repeatForever(t).start()},VerticalKnife:function(){var t=this,e=cc.tween().by(this.duration,{y:-480},{easing:"elasticIn"}).call(function(){t.PlayAudio()}).by(this.duration,{y:480});this.animation=cc.tween(this.MovableObject).repeatForever(e).start()},Hammer:function(){var t=this,e=cc.tween().by(this.duration,{angle:90},{easing:"elasticIn"}).call(function(){t.PlayAudio()}).by(this.duration,{angle:-90});this.animation=cc.tween(this.MovableObject).repeatForever(e).start()},VerticalPlate:function(){var t=this,e=cc.tween().delay(.2).by(this.duration,{y:-375},{easing:"elasticIn"}).call(function(){t.PlayAudio()}).delay(.2).by(this.duration,{y:375});this.animation=cc.tween(this.MovableObject).repeatForever(e).start()},SawBlade:function(){var t=cc.tween().by(.4,{angle:360});cc.tween(this.MovableObject).repeatForever(t).start();var e=cc.tween().by(this.duration,{y:-550}).by(this.duration,{y:550});this.animation=cc.tween(this.MovableObject).repeatForever(e).start()},onCollisionEnter:function(t){10==t.tag?(this.canPlayAudio=!0,6==this.objectType&&this.audioSource.play()):9==t.tag&&(console.log("stop the audio"),this.canPlayAudio=!1,6==this.objectType&&this.audioSource.stop())},PlayAudio:function(){this.canPlayAudio&&(console.log("play audio"),null!=this.audioSource&&this.audioSource.play())}}),cc._RF.pop()},{}],ObstacleSoundManager:[function(t,e){"use strict";cc._RF.push(e,"6feb5TXF49KTIAJAMrAYK1B","ObstacleSoundManager"),cc.Class({extends:cc.Component,properties:{},start:function(){},onCollisionEnter:function(t){t.tag}}),cc._RF.pop()},{}],PlatformSpawner:[function(t,e){"use strict";var i;cc._RF.push(e,"d3474lDE9BOFZVgTr6fIxXZ","PlatformSpawner"),cc.Class({extends:cc.Component,properties:(i={obstacles:{default:[],type:cc.Prefab},widthOfObstacles:{default:[],type:cc.Float},previousObjectPosition:cc.v2(0,0),previousObject:200,previousObjectwidth:32,gap:300,minGap:200,player:{default:null,type:cc.Node}},i.previousObject={default:null,type:cc.Node},i.count=6,i.thresholdWidth=500,i),start:function(){},update:function(){Global.isGameOver||this.SpawnObstacles()},CreateObject:function(t,e){var i=cc.instantiate(this.obstacles[e]);return i.parent=this.node.parent,t.x+=this.widthOfObstacles[e]/2,i.setPosition(t),this.SyncAllChildren(i),i},SyncAllChildren:function(t){for(var e=0;e<t.children.length;e++){var i=t.children[e].getComponent(cc.RigidBody);null!=i&&i.syncPosition(),this.SyncAllChildren(t.children[e])}},SpawnObstacles:function(){if(this.CanSpawnObstacle()){var t=this.previousObject.x+this.previousObjectwidth/2+this.minGap;this.count=this.count-1;var e=0;this.count<0&&(e=1,this.count<=-3&&(this.count=3)),this.previousObject=this.CreateObject(cc.v2(t,0),e),this.previousObjectwidth=this.widthOfObstacles[e]}},CanSpawnObstacle:function(){return this.previousObject.x-this.player.x<this.thresholdWidth},GetRandom:function(t,e){return Math.random()*(e-t)+t}}),cc._RF.pop()},{}],PlayerController:[function(t,e){"use strict";cc._RF.push(e,"349d2se4ApM86nbh0n3f5rn","PlayerController"),cc.Class({extends:cc.Component,editor:{executionOrder:-1},properties:{playerState:0,boxCollider:{default:null,type:cc.BoxCollider},anim:null,speedX:100,restartSpeed:140,animationController:null,bloodAnimation:{default:null,type:cc.Animation},carrotDeathAudio:{default:null,type:cc.AudioSource},hasShield:!1},onLoad:function(){cc.game.on("touchBegan",this.OnTouched,this),cc.game.on("touchEnded",this.OnTouchEnded,this)},start:function(){this.animationController=this.node.getComponent("AnimationController"),this.bloodAnimation.on("finished",this.OnBloodAnimationFinished,this),null!=this.animationController&&console.log("anima is  not null")},update:function(t){Global.isGamePaused||Global.isGameOver||0!=this.playerState&&4!=this.playerState&&(this.node.x+=this.speedX*t)},OnTouched:function(){Global.isGamePaused||Global.isGameOver||(this.animationController.ChangeAnimation(1),this.LongToShortCollider(),this.ChangePlayerState(2))},OnTouchEnded:function(){Global.isGamePaused||Global.isGameOver||(this.animationController.ChangeAnimation(3),this.ShortToLongCollider(),this.ChangePlayerState(1))},ChangePlayerState:function(t){if(4!=this.playerState||0==t)switch(this.playerState=t,t){case 0:break;case 1:this.speedX/=4;break;case 2:this.speedX*=4;break;case 4:Global.isGameOver=!0,this.carrotDeathAudio.play(),this.scheduleOnce(function(){this.RestartScene()},.8),console.log("-- Game Over --")}},onCollisionEnter:function(t){this.isShieldActive?window.navigator&&window.navigator.vibrate&&window.navigator.vibrate(650):1==t.tag?this.PlayerDead():2==t.tag&&this.PlayerFireDeath()},onCollisionStay:function(){},onCollisionExit:function(){},ShortToLongCollider:function(){this.boxCollider.offset.x=76,this.boxCollider.size.width=90,this.boxCollider.offset.y=-41,this.boxCollider.size.height=318},LongToShortCollider:function(){this.boxCollider.offset.x=50,this.boxCollider.size.width=180,this.boxCollider.offset.y=-133,this.boxCollider.size.height=135},PlayerDead:function(){4!=this.playerState&&(this.bloodAnimation.play("bloodAnimation"),this.animationController.ChangeAnimation(4),this.ChangePlayerState(4))},PlayerFireDeath:function(){4!=this.playerState&&(console.log("-- fireDeath --"),this.animationController.ChangeAnimation(5),this.ChangePlayerState(4))},AnimationTesting:function(){this.anim.play("transitionBendAnimation")},OnBloodAnimationFinished:function(){this.bloodAnimation.node.getComponent(cc.Sprite).spriteFrame=null},DeactivateShield:function(){console.log("shield deactivated"),this.isShieldActive=!1},ActivateShield:function(){this.isShieldActive=!0},RestartScene:function(){this.playerState=0,this.speedX=this.restartSpeed,this.animationController.ChangeAnimation(0),Global.isGameOver=!1,Global.isGamePaused=!1,this.node.x-=800}}),cc._RF.pop()},{}],SpawnManager:[function(t,e){"use strict";var i;cc._RF.push(e,"2515bbe0AtK9oDgzQYMgloJ","SpawnManager"),cc.Class({extends:cc.Component,properties:(i={obstacles:{default:[],type:cc.Prefab},widthOfObstacles:{default:[],type:cc.Float},previousObjectPosition:cc.v2(0,0),previousObject:200,previousObjectwidth:32,gap:300,minGap:200,player:{default:null,type:cc.Node}},i.previousObject={default:null,type:cc.Node},i.thresholdWidth=500,i.startPositionX=1e3,i),start:function(){if(null==this.previousObject){var t=Math.round(this.GetRandom(0,this.obstacles.length-1));this.previousObject=this.CreateObject(cc.v2(this.startPositionX,0),t),this.previousObjectwidth=this.widthOfObstacles[t]}},update:function(){Global.isGameOver||this.SpawnObstacles()},CreateObject:function(t,e){var i=cc.instantiate(this.obstacles[e]);return i.parent=this.node.parent,t.x+=this.widthOfObstacles[e]/2,i.setPosition(t),this.SyncAllChildren(i),i},SyncAllChildren:function(t){for(var e=0;e<t.children.length;e++){var i=t.children[e].getComponent(cc.RigidBody);null!=i&&i.syncPosition(),this.SyncAllChildren(t.children[e])}},SpawnObstacles:function(){if(this.CanSpawnObstacle()){var t=this.previousObject.x+this.previousObjectwidth/2+this.minGap,e=Math.round(this.GetRandom(0,this.obstacles.length-1));this.previousObject=this.CreateObject(cc.v2(t,0),e),this.previousObjectwidth=this.widthOfObstacles[e]}},CanSpawnObstacle:function(){return this.previousObject.x-this.player.x<this.thresholdWidth},GetRandom:function(t,e){return Math.random()*(e-t)+t}}),cc._RF.pop()},{}]},{},["AnimationController","CameraController","FireObstacle","FireSound","Global","InputHandler","ObjectDestroyer","ObstacleMovement","ObstacleSoundManager","PlatformSpawner","PlayerController","SpawnManager"]);